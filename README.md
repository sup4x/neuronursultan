# Telegram AI Бот на Rust

Telegram бот с интеграцией AI (Groq) для общения, обладающий специфичной личностью.

## Функционал

- **Работает только в одной разрешенной группе/чате.**
- **Автоматическая отправка случайного YouTube видео** раз в день в случайное время с 10:00 до 22:00. Видео ищутся по заранее заданным ключевым словам.
- **AI-ответы на сообщения**:
  - Использует модель `llama-3.3-70b-versatile` через API Groq.
  - Имеет особую манеру общения: боту дана инструкция намеренно совершать грамматические и орфографические ошибки.
  - Бот отвечает на сообщения в следующих случаях:
    - Если его упомянули в сообщении (`@имя_бота`).
    - Если кто-то ответил на его предыдущее сообщение.
    - Со случайной вероятностью **10%** на любое сообщение в чате.
- **Случайное событие**: с вероятностью **1%** бот может отправить в чат сообщение с упоминанием конкретного пользователя.
- **Логирование**: все действия и сообщения из других чатов подробно логируются в файлы с группировкой по датам (`logs/dd-mm-yy/bot.log`).
- В неразрешенных чатах бот не отвечает, только логирует информацию.

## Установка и запуск

1.  Создайте бота через [@BotFather](https://t.me/botfather) и получите токен.

2.  Получите YouTube API ключ в [Google Cloud Console](https://console.cloud.google.com/):
    - Создайте проект, включите "YouTube Data API v3" и получите API ключ.

3.  Получите Groq API ключ:
    - Зарегистрируйтесь на [сайте Groq](https://groq.com/).
    - Перейдите в раздел API ключей и создайте новый ключ.

4.  Создайте файл `.env` на основе `.env.example`:
    ```bash
    cp .env.example .env
    ```

5.  Вставьте ваши ключи и ID чата в файл `.env`:
    ```
    TELOXIDE_TOKEN=ваш_токен_здесь
    ALLOWED_CHAT_ID=-1001234567890
    YOUTUBE_API_KEY=ваш_youtube_api_ключ
    GROQ_API_KEY=ваш_groq_api_ключ
    ```

    Чтобы узнать ID группы, можно добавить в нее [@userinfobot](https://t.me/userinfobot).

6.  Создайте файл `system_prompt.txt` в корне проекта. В этот файл нужно поместить "системный промпт" — инструкцию, которая определяет личность и поведение AI. Например:
    ```
    Ты — норсолтон.
    ```
    Именно в этот файл нужно добавлять инструкцию про общение с ошибками.

7.  Запустите бота:
    ```bash
    cargo run
    ```

## Зависимости

- `teloxide` - для работы с Telegram Bot API
- `tokio` - асинхронная среда выполнения
- `log` - фасад для логирования
- `fern` - для конфигурации логирования в файлы
- `chrono` - для работы с датами и временем
- `dotenvy` - для загрузки переменных окружения из `.env`
- `rand` - для генерации случайных чисел
- `reqwest` - для HTTP запросов к API
- `serde` + `serde_json` - для (де)сериализации JSON
- `futures` - для работы с асинхронными операциями

## Структура логов

Логи сохраняются в папке `logs/` с автоматической группировкой по датам:
```
logs/
  05-01-26/
    bot.log
  06-01-26/
    bot.log
```
